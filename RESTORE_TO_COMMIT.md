# æ¢å¤åˆ°æŒ‡å®šæäº¤ç‰ˆæœ¬æŒ‡å—

## ğŸ“‹ ç›®æ ‡æäº¤
- **æäº¤å“ˆå¸Œ**: `47d10ac516fb7b0de758ba93b6d5fa79a085794d`

## âš ï¸ é‡è¦æç¤º

### å…³äºæ•°æ®åº“
**æ•°æ®åº“ä¸ä¼šå› ä¸ºä»£ç å›é€€è€Œè‡ªåŠ¨æ¢å¤ï¼**

- Git åªç®¡ç†ä»£ç æ–‡ä»¶ï¼Œä¸ç®¡ç†æ•°æ®åº“
- Supabase æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†
- å¦‚æœé‚£ä¸ªç‰ˆæœ¬çš„ä»£ç éœ€è¦ç‰¹å®šçš„æ•°æ®åº“ç»“æ„ï¼Œä½ éœ€è¦ï¼š
  1. æŸ¥çœ‹é‚£ä¸ªç‰ˆæœ¬çš„æ•°æ®åº“è¿ç§»è„šæœ¬
  2. æ‰‹åŠ¨è¿è¡Œç›¸åº”çš„ SQL è„šæœ¬
  3. æˆ–è€…ä»æ•°æ®åº“å¤‡ä»½æ¢å¤ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰

## ğŸ”„ æ¢å¤æ­¥éª¤

### æ–¹æ³• 1: åˆ›å»ºæ–°åˆ†æ”¯æ¢å¤ï¼ˆæ¨è - å®‰å…¨ï¼‰

```bash
# 1. å…ˆåˆ›å»ºå¤‡ä»½åˆ†æ”¯ï¼ˆä¿å­˜å½“å‰çŠ¶æ€ï¼‰
git branch backup-before-restore-$(Get-Date -Format "yyyyMMdd-HHmmss")

# 2. æŸ¥çœ‹ç›®æ ‡æäº¤çš„ä¿¡æ¯
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d --stat

# 3. åˆ›å»ºæ–°åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°ç›®æ ‡æäº¤
git checkout -b restore-47d10ac 47d10ac516fb7b0de758ba93b6d5fa79a085794d

# 4. å¦‚æœç¡®è®¤æ— è¯¯ï¼Œå¯ä»¥å°†è¿™ä¸ªåˆ†æ”¯åˆå¹¶å› main
# git checkout main
# git merge restore-47d10ac
```

### æ–¹æ³• 2: ç›´æ¥å›é€€åˆ°ç›®æ ‡æäº¤ï¼ˆå±é™© - ä¼šä¸¢å¤±ä¹‹åçš„æäº¤ï¼‰

```bash
# âš ï¸ è­¦å‘Šï¼šè¿™ä¼šåˆ é™¤ä¹‹åçš„æ‰€æœ‰æäº¤ï¼

# 1. å…ˆåˆ›å»ºå¤‡ä»½åˆ†æ”¯
git branch backup-before-restore-$(Get-Date -Format "yyyyMMdd-HHmmss")

# 2. è½¯å›é€€ï¼ˆä¿ç•™æ–‡ä»¶ä¿®æ”¹ï¼Œå¯ä»¥é‡æ–°æäº¤ï¼‰
git reset --soft 47d10ac516fb7b0de758ba93b6d5fa79a085794d

# æˆ–è€…ç¡¬å›é€€ï¼ˆå®Œå…¨åˆ é™¤ä¹‹åçš„ä¿®æ”¹ï¼Œæ— æ³•æ¢å¤ï¼ï¼‰
# git reset --hard 47d10ac516fb7b0de758ba93b6d5fa79a085794d
```

### æ–¹æ³• 3: åªæ¢å¤ç‰¹å®šæ–‡ä»¶ï¼ˆæ¨è - æœ€å®‰å…¨ï¼‰

```bash
# 1. æŸ¥çœ‹ç›®æ ‡æäº¤ä¿®æ”¹äº†å“ªäº›æ–‡ä»¶
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d --stat

# 2. æ¢å¤ç‰¹å®šæ–‡ä»¶åˆ°ç›®æ ‡ç‰ˆæœ¬
git checkout 47d10ac516fb7b0de758ba93b6d5fa79a085794d -- <æ–‡ä»¶è·¯å¾„>

# ä¾‹å¦‚ï¼š
# git checkout 47d10ac516fb7b0de758ba93b6d5fa79a085794d -- src/App.jsx
# git checkout 47d10ac516fb7b0de758ba93b6d5fa79a085794d -- src/components/ConsultationQueue.jsx

# 3. æŸ¥çœ‹æ¢å¤åçš„å·®å¼‚
git diff HEAD

# 4. å¦‚æœæ»¡æ„ï¼Œæäº¤æ›´æ”¹
git add .
git commit -m "æ¢å¤æ–‡ä»¶åˆ°æäº¤ 47d10ac"
```

## ğŸ—„ï¸ æ•°æ®åº“å¤„ç†

### 1. æŸ¥çœ‹ç›®æ ‡ç‰ˆæœ¬çš„æ•°æ®åº“è„šæœ¬

```bash
# æŸ¥çœ‹ç›®æ ‡æäº¤æ—¶çš„æ•°æ®åº“è„šæœ¬
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d:database/

# æˆ–è€…æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d:database/<æ–‡ä»¶å>.sql
```

### 2. æ£€æŸ¥æ•°æ®åº“ç»“æ„å·®å¼‚

æ¯”è¾ƒå½“å‰æ•°æ®åº“ç»“æ„å’Œç›®æ ‡ç‰ˆæœ¬éœ€è¦çš„ç»“æ„ï¼š

```sql
-- åœ¨ Supabase SQL Editor ä¸­è¿è¡Œ
-- æŸ¥çœ‹å½“å‰è¡¨ç»“æ„
SELECT table_name, column_name, data_type 
FROM information_schema.columns 
WHERE table_schema = 'public'
ORDER BY table_name, ordinal_position;
```

### 3. æ¢å¤æ•°æ®åº“ï¼ˆå¦‚æœéœ€è¦ï¼‰

**é€‰é¡¹ A: å¦‚æœæœ‰æ•°æ®åº“å¤‡ä»½**
- ä» Supabase Dashboard æ¢å¤å¤‡ä»½
- æˆ–è€…ä»ä¹‹å‰çš„ SQL å¯¼å‡ºæ¢å¤

**é€‰é¡¹ B: æ‰‹åŠ¨è°ƒæ•´æ•°æ®åº“ç»“æ„**
- æŸ¥çœ‹ç›®æ ‡ç‰ˆæœ¬çš„æ•°æ®åº“è¿ç§»è„šæœ¬
- æ‰‹åŠ¨è¿è¡Œç›¸åº”çš„ SQL è„šæœ¬
- æ³¨æ„ï¼šå¯èƒ½éœ€è¦åˆ é™¤æ–°æ·»åŠ çš„åˆ—/è¡¨ï¼Œæˆ–æ¢å¤æ—§çš„ç»“æ„

**é€‰é¡¹ C: ä¿æŒå½“å‰æ•°æ®åº“ç»“æ„**
- å¦‚æœä»£ç å…¼å®¹ï¼Œå¯ä»¥ä¿æŒå½“å‰æ•°æ®åº“ç»“æ„
- åªéœ€è¦ç¡®ä¿ä»£ç èƒ½æ­£å¸¸å·¥ä½œ

## ğŸ“ å®Œæ•´æ¢å¤æµç¨‹ç¤ºä¾‹

```bash
# === æ­¥éª¤ 1: å¤‡ä»½å½“å‰çŠ¶æ€ ===
git branch backup-$(Get-Date -Format "yyyyMMdd-HHmmss")

# === æ­¥éª¤ 2: æŸ¥çœ‹ç›®æ ‡æäº¤ä¿¡æ¯ ===
git log --oneline | findstr "47d10ac"
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d --stat

# === æ­¥éª¤ 3: æŸ¥çœ‹ç›®æ ‡æäº¤æ—¶çš„æ•°æ®åº“è„šæœ¬ ===
git show 47d10ac516fb7b0de758ba93b6d5fa79a085794d --name-only | findstr "database"

# === æ­¥éª¤ 4: åˆ›å»ºæ¢å¤åˆ†æ”¯ ===
git checkout -b restore-47d10ac 47d10ac516fb7b0de758ba93b6d5fa79a085794d

# === æ­¥éª¤ 5: æµ‹è¯•ä»£ç  ===
# è¿è¡Œåº”ç”¨ï¼Œæµ‹è¯•åŠŸèƒ½

# === æ­¥éª¤ 6: å¦‚æœç¡®è®¤æ— è¯¯ï¼Œåˆå¹¶å› main ===
git checkout main
git merge restore-47d10ac

# === æ­¥éª¤ 7: å¤„ç†æ•°æ®åº“ ===
# åœ¨ Supabase ä¸­è¿è¡Œç›¸åº”çš„ SQL è„šæœ¬
```

## ğŸ†˜ å¦‚æœå‡ºé”™äº†æ€ä¹ˆåŠï¼Ÿ

```bash
# ä½¿ç”¨ reflog æ‰¾å›ä»»ä½•ä¸¢å¤±çš„æäº¤
git reflog

# æ¢å¤åˆ° reflog ä¸­çš„æŸä¸ªçŠ¶æ€
git reset --hard <reflog-hash>

# æˆ–è€…åˆ‡æ¢å›å¤‡ä»½åˆ†æ”¯
git checkout backup-<timestamp>
```

## âœ… æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»ºäº†å¤‡ä»½åˆ†æ”¯
- [ ] æŸ¥çœ‹äº†ç›®æ ‡æäº¤çš„ä¿¡æ¯
- [ ] æŸ¥çœ‹äº†ç›®æ ‡æäº¤çš„æ•°æ®åº“è„šæœ¬
- [ ] ç¡®è®¤äº†æ•°æ®åº“æ¢å¤æ–¹æ¡ˆ
- [ ] æµ‹è¯•äº†æ¢å¤åçš„ä»£ç 
- [ ] å¤„ç†äº†æ•°æ®åº“ç»“æ„ï¼ˆå¦‚æœéœ€è¦ï¼‰

