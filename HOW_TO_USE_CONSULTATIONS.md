# 如何使用咨询功能 - 完整指南

## 📍 "Consultations" 按钮在哪里？

"Consultations" 按钮位于**应用顶部的 header（标题栏）**中。

### 位置说明：

1. **登录后**，在页面最顶部会看到：
   ```
   ┌─────────────────────────────────────────┐
   │  farmasiKu    [💬 Consultations] [🏥 Admin] [用户名] │
   └─────────────────────────────────────────┘
   ```

2. **按钮位置**：
   - 在 "farmasiKu" 标题的**右侧**
   - 在 "Admin" 按钮的**左侧**
   - 显示为：**💬 Consultations**（蓝色渐变按钮）

3. **如果看不到按钮**：
   - 确保你已经**登录**（按钮只在登录后显示）
   - 检查浏览器窗口是否太窄（在小屏幕上按钮可能会换行）

---

## 🚀 完整使用流程

### 作为患者（Patient）

#### 步骤 1：创建咨询
1. 完成症状选择流程
2. 在确认症状时，选择 **"More severe"**
3. 点击 **"Start Consultation"**
4. 系统会自动分配医生并创建咨询会话

#### 步骤 2：查看咨询
1. 点击顶部的 **"💬 Consultations"** 按钮
2. 在列表中看到你的咨询会话
3. 点击会话卡片进入聊天界面

#### 步骤 3：发送消息
1. 在聊天界面底部输入消息
2. 点击 **"Send"** 按钮
3. 医生会收到你的消息并回复

---

### 作为医生（Doctor）

#### 步骤 1：关联医生账户（首次使用）
1. 登录你的账户
2. 点击 **"🏥 Admin"** 按钮
3. 切换到 **"👨‍⚕️ Doctors"** 标签
4. 找到你的医生账户（或创建新医生）
5. 点击 **"🔗 Link to My Account"** 按钮
6. 确认关联

#### 步骤 2：查看分配的咨询
1. 点击顶部的 **"💬 Consultations"** 按钮
2. 在列表中看到分配给你的咨询会话
3. 会话状态会显示为：**pending**、**active**、**completed** 等

#### 步骤 3：回复患者
1. 点击要回复的咨询会话
2. 在聊天界面底部输入回复
3. 点击 **"Send"** 按钮
4. 患者会实时收到你的回复

---

## 🎯 按钮位置图示

### 桌面视图：
```
┌─────────────────────────────────────────────────────────────┐
│  farmasiKu          [💬 Consultations] [🏥 Admin] [用户名]      │
└─────────────────────────────────────────────────────────────┘
```

### 移动视图（小屏幕）：
```
┌─────────────────────┐
│  farmasiKu          │
│  [💬 Consultations]  │
│  [🏥 Admin] [用户名]  │
└─────────────────────┘
```

---

## ❓ 常见问题

### Q: 我找不到 "Consultations" 按钮
**A:** 检查：
1. ✅ 是否已登录？
2. ✅ 浏览器窗口是否太窄（尝试滚动或放大）
3. ✅ 是否在 Admin 页面（Admin 页面会隐藏 header）

### Q: 点击按钮后没有咨询
**A:** 可能的原因：
- 还没有创建任何咨询（作为患者需要先完成症状选择并选择 "More severe"）
- 医生账户未关联（作为医生需要先在 Admin 页面关联账户）
- 咨询被分配给其他医生（检查 `doctor_id` 是否匹配）

### Q: 在聊天界面无法发送消息
**A:** 检查：
1. 医生账户是否已关联到你的用户账户
2. 当前用户是否是该咨询的患者或医生
3. 咨询状态是否为 "completed"（已完成的咨询无法发送消息）

---

## 📱 移动端提示

在小屏幕设备上：
- 按钮可能会换行显示
- 建议横向查看或放大页面
- 按钮文字可能会缩短，但图标（💬）仍然可见

---

## 🔗 相关功能

- **Admin 页面**：管理医生账户、查看所有咨询
- **Profile 页面**：查看订单历史和个人信息
- **咨询列表**：显示所有你的咨询会话（患者或医生）

---

## 💡 提示

- 咨询消息是**实时同步**的，无需刷新页面
- 可以同时打开多个咨询会话（在不同标签页）
- 医生可以看到分配给他们的所有咨询，包括待处理、进行中和已完成的

